!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("lodash/set"),require("lodash/merge"),require("lodash/cloneDeep"),require("lodash/isNumber"),require("lodash/isFunction")):"function"==typeof define&&define.amd?define(["lodash/set","lodash/merge","lodash/cloneDeep","lodash/isNumber","lodash/isFunction"],e):t.ReduxStoreProvider=e(t._.set,t._.merge,t._.cloneDeep,t._.isNumber,t._.isFunction)}(this,function(a,s,o,u,l){"use strict";function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}a=a&&a.hasOwnProperty("default")?a.default:a,s=s&&s.hasOwnProperty("default")?s.default:s,o=o&&o.hasOwnProperty("default")?o.default:o,u=u&&u.hasOwnProperty("default")?u.default:u,l=l&&l.hasOwnProperty("default")?l.default:l;var f=[],d={value:{}},p=s({list:[],total:0},d);return function(){function e(t){if(void 0===t&&(t={}),-1<f.indexOf(this._key))throw new TypeError("Reducer: key '"+name+"' already exists");this._key=t.key,this._type=t.type,this._time=Date.now(),this._name=null,this._key||(this._key=this._time.toString(36).toUpperCase(),++this._time),this._action=null,this._handlers={},"list"===this._type?(this._reducer=this._reducerList.bind(this),this._initialState=e.getInitialStateList()):(this._reducer=this._reducerSingle.bind(this),this._initialState=e.getInitialState()),t.initialState&&this.setInitialState(t.initialState),f.push(this._key)}e.config=function(t){return t.initialState&&s(d,t.initialState),t.initialStateList&&s(p,t.initialStateList),this},e.getInitialState=function(){return o(d)},e.getInitialStateList=function(){return s(o(p),d)};var t,i,n,r=e.prototype;return r.begin=function(t){if(t=String(t).toUpperCase(),this._handlers[t])throw new TypeError("Duplicate '"+t+"' exists on the begin method");return this._name=t,this},r.action=function(t){if(!this._name)throw new TypeError("Please call the function action before begin");if(!l(t))throw new TypeError(h(t)+" is not a function");if(this._handlers[this._name]||(this._handlers[this._name]={}),this._handlers[this._name].action)throw new TypeError("Action: '"+this._name+"' already registered");return this._handlers[this._name].action=t.bind(null,this.type(this._name)),this},r.reducer=function(t){if(!this._name)throw new TypeError("Please call the function reducer before begin");if(!l(t))throw new TypeError(h(t)+" is not a function");if(this._handlers[this._name]||(this._handlers[this._name]={}),this._handlers[this._name].reducer)throw new TypeError("Reducer: '"+this._name+"' already registered");return this._handlers[this._name].reducer=t.bind(null,this.type(this._name)),this},r.end=function(){return this._name=null,this},r.type=function(t){return void 0===t&&(t=this._name),this._key+"_"+String(t).toUpperCase()},r.setInitialState=function(t){return s(this._initialState,t),this},r.getInitialState=function(){return this._initialState},r.getAction=function(){return this._action||("list"===this._type?this._action=this._actionList():this._action=this._actionSingle()),this._action},r.getReducer=function(){return this._reducer},r._reducerSingle=function(t,e){void 0===t&&(t=this._initialState);var i=this._key+"_";if(0!==e.type.indexOf(i))return t;var n=t;switch(e.type){case this.type("SET"):n=o(t),a(n.value,e.path,e.value);break;case this.type("MERGE"):n=o(t),s(n.value,e.value);break;default:var r=e.type.substr(i.length);this._handlers[r]&&this._handlers[r].reducer&&(n=this._handlers[r].reducer(t,e))}return n},r._reducerList=function(t,e){var i,n,r;if(void 0===t&&(t=this._initialState),0!==e.type.indexOf(this._key+"_"))return t;var a=t;switch(e.type){case this.type("FILL"):(a=o(t)).list=e.value,a.total=u(+e.total)?e.total:e.value.length;break;case this.type("SHIFT"):(a=o(t)).list.shift();break;case this.type("UNSHIFT"):(i=(a=o(t)).list).unshift.apply(i,e.value);break;case this.type("POP"):(a=o(t)).list.pop();break;case this.type("PUSH"):(n=(a=o(t)).list).push.apply(n,e.value);break;case this.type("INSERT"):(r=(a=o(t)).list).splice.apply(r,[e.index,0].concat(e.value));break;case this.type("REPLACE"):a=o(t),l(e.index)?a.list=a.list.map(e.index):a.list.splice(e.index,1,e.value);break;case this.type("REMOVE"):a=o(t),l(e.index)?a.list=a.list.filter(e.index):a.list.splice(e.index,1);break;default:a=this._reducerSingle(t,e)}return a},r._actionSingle=function(){var i=this._key,t={};for(var e in this._handlers)t[e.toLowerCase()]=this._handlers[e].action;return Object.assign({key:i,set:function(t,e){return{path:t,value:e,type:i+"_SET"}},merge:function(t){return{value:t,type:i+"_MERGE"}}},t)},r._actionList=function(){var r=this._key;return Object.assign({fill:function(t,e){return{total:e,value:t,type:r+"_FILL"}},shift:function(){return{type:r+"_SHIFT"}},unshift:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return{value:e,type:r+"_UNSHIFT"}},pop:function(){return{type:r+"_POP"}},push:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return{value:e,type:r+"_PUSH"}},insert:function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];return{index:t,value:i,type:r+"_INSERT"}},replace:function(t,e){return{index:t,value:e,type:r+"_REPLACE"}},remove:function(t){return{index:t,type:r+"_REMOVE"}}},this._actionSingle())},t=e,(i=[{key:"key",get:function(){return this._key},set:function(t){throw new TypeError("set value not allowed for key")}}])&&c(t.prototype,i),n&&c(t,n),e}()});